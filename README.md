# 2025- 통계활용데이터 분석대회
분명 고령화 주제였던것 같은데 어쩌다보니 자전거 교통사고로 흘러왔다...
# 서울시 따릉이 대여소 안전도 분석 프로젝트

## 1. 프로젝트 개요

본 프로젝트는 서울시 공공자전거 '따릉이'의 대여소 데이터와 서울시 내 사고 데이터를 종합적으로 분석하여, 각 따릉이 대여소의 상대적인 안전도를 평가하고 분류하는 것을 목표로 합니다. 단순히 사고 발생 건수가 아닌, 대여소별 이용량으로 보정된 **'위험 지수(Risk Index)'**를 개발하여 객관적인 안전도 등급을 산출하고, 이를 지도 위에 시각화하여 직관적인 인사이트를 도출하고자 합니다.

## 2. 데이터 소스

본 분석에는 다음과 같은 데이터가 사용되었습니다.

* **따릉이 이용 정보**: `서울특별시 공공자전거 이용정보(시간대별)_21~23.csv`
    * 2021년부터 2023년까지 3년간의 따릉이 대여 이력 데이터.
    * 대여소별 총 대여 횟수를 집계하는 데 사용되었습니다.
* **대여소 좌표 정보**: `대여소좌표정보.csv`
    * 각 대여소의 ID, 이름, 위도, 경도 등 기본 정보를 포함합니다.
* **사고 데이터**: `최종_accident.csv`
    * 서울시 내에서 발생한 사고 위치의 위도, 경도 데이터를 포함합니다.

## 3. 분석 절차 및 방법론

분석은 데이터 전처리, 모델링, 위험도 계산, 분류, 시각화의 5단계로 진행되었습니다.

### 3-1. 데이터 전처리 및 통합

1.  **대여 횟수 집계**: 3년간의 따릉이 이용 정보 CSV 파일들을 통합하여, 각 대여소 ID별 총 대여 횟수를 계산했습니다.
2.  **데이터 통합 (Merge)**:
    * 대여소별 총 대여 횟수 데이터와 대여소 좌표 정보 데이터를 '대여소 번호'를 기준으로 병합하여 대여소의 기본 정보와 이용량 정보를 통합했습니다.
    * 이 과정에서 데이터가 누락된 대여소를 제거하는 등 유효성 검사를 수행하여 총 2,754개의 유효한 대여소 데이터를 확정했습니다.

### 3-2. 데이터 모델링: `Station` 클래스 정의

분석의 편의성과 데이터 관리를 위해 각 대여소의 정보를 담는 `Station` 파이썬 클래스(객체)를 정의했습니다. 각 객체는 다음과 같은 주요 속성을 가집니다.

* `station_id`: 대여소 번호
* `name`: 대여소 이름
* `latitude`: 위도
* `longitude`: 경도
* `rental_count`: 3년간 총 대여 횟수
* `nearby_accident_count`: (분석 후 추가) 주변 사고 건수
* `risk_index`: (분석 후 추가) 위험 지수
* `safety_class`: (분석 후 추가) 안전도 등급

### 3-3. 안전도 분류 방법론

객관적인 위험도 평가를 위해 다음과 같은 3단계 분류 전략을 수립했습니다.

#### 가. '주변'의 정의: 반경 설정

* 각 대여소를 중심으로 **반경 500미터(m)** 이내를 '주변 지역'으로 설정하고, 이 범위 내에 포함된 모든 사고 데이터의 수를 계산했습니다.
* 계산의 효율성을 위해 `scipy.spatial.cKDTree`를 사용한 빠른 근접 이웃 탐색(Proximity Search)을 수행했습니다.

#### 나. '위험도'의 정량화: 위험 지수(Risk Index) 계산

'이용량이 많으면 사고도 많다'는 편향을 보정하기 위해, 대여 횟수로 정규화된 '위험 지수'를 아래 수식을 통해 계산했습니다.

$$
\text{위험 지수 (Risk Index)} = \frac{\text{반경 500m 내 총 사고 건수}}{\text{해당 대여소의 3년간 총 대여 횟수}} \times 10,000
$$

이 지수는 **"대여 1만 건당 주변 사고 발생 건수"**를 의미하며, 각 대여소의 상대적인 위험도를 나타냅니다.

#### 다. '안전 등급' 결정: 통계적 분류

모든 대여소의 위험 지수를 계산한 후, 임의의 값이 아닌 통계적 기준인 **백분위수(Percentile)**를 사용하여 세 그룹으로 분류했습니다.

* **`Danger` (위험)**: 위험 지수 **상위 20%** (≥ 80th Percentile)
* **`Normal` (보통)**: 위험 지수 **중간 60%** (20th ~ 80th Percentile)
* **`Safe` (안전)**: 위험 지수 **하위 20%** (< 20th Percentile)

## 4. 분석 결과 및 시각화

### 4-1. 최종 데이터

분석의 모든 결과는 `대여소_안전도_분류결과.csv` 파일로 저장되었습니다. 이 파일은 각 대여소의 기본 정보와 함께 계산된 위험 지수, 최종 안전도 등급을 포함합니다.

| station_id | name | latitude | longitude | total_rentals | nearby_accidents | risk_index | safety_class |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| 303 | 광화문역 1번출구 앞 | 37.5718 | 126.975 | 72387 | 15 | 2.0721 | Danger |
| 502 | 뚝섬유원지역 1번출구 앞| 37.5319 | 127.067 | 225907 | 10 | 0.4427 | Normal |
| ... | ... | ... | ... | ... | ... | ... | ... |

*(위 테이블은 예시입니다.)*

### 4-2. 최종 시각화

분류된 안전도 등급을 서울시 지도 위에 시각화하여 위험 지역의 지리적 분포를 한눈에 파악할 수 있도록 했습니다.

* **초록색(Safe)**: 상대적으로 안전한 대여소
* **주황색(Normal)**: 보통 수준의 위험도를 가진 대여소
* **빨간색(Danger)**: 상대적으로 위험도가 높은 대여소

![Bike Station Safety Classification on Seoul Map](https://i.imgur.com/your-image-placeholder.png)
*(이 줄의 괄호 안에 실제 이미지 파일의 경로 또는 URL을 입력하세요. 예: ./images/final_map.png)*

시각화 결과, 특정 도로 및 상업/유흥 지역을 따라 '위험' 등급의 대여소가 밀집하는 경향을 확인할 수 있었습니다.

## 5. 코드

본 분석에 사용된 전체 코드는 아래 Jupyter Notebook 파일에서 확인하실 수 있습니다.

* `[분석노트북_파일이름.ipynb](분석노트북_파일링크)`
    *(이 줄의 괄호 안에 실제 노트북 파일의 링크를 입력하세요.)*

## 6. 향후 과제 (Future Work)

* **'위험' 지역 심층 분석**: 위험 등급으로 분류된 대여소들의 공통적인 환경적 요인(예: 도로 종류, 교차로 형태, 주변 상권 등)을 분석하여 사고 발생의 구체적인 원인을 탐색할 수 있습니다.
* **시간적 패턴 분석**: 요일별, 시간대별, 계절별 사고 패턴과 대여소 위험도의 관계를 분석하여 특정 시간/상황에서의 위험도를 예측할 수 있습니다.
* **예측 모델 개발**: 수집된 데이터를 바탕으로 특정 대여소의 미래 위험도를 예측하는 머신러닝 모델을 개발할 수 있습니다.
